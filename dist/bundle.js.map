{"version":3,"sources":["webpack:///webpack/bootstrap 65bbfc5f24a724f50e7d","webpack:///external \"angular\"","webpack:///external \"d3\"","webpack:///./src/MapCtrl.js","webpack:///./src/map.js","webpack:///external \"topojson\"","webpack:///./src/index.js"],"names":["d3","MapCtrl","$http","$interval","$window","console","log","timestep","map","loading","get","then","resp","draw","data","csv","row","d","nested","nest","key","Year","entries","nested_data","start_animation","cancel","interval_promise","play","stop_animation","set_county_values","length","topojson","CountyMap","element_id","self","svg","select","width","parseInt","style","height","colors","categories","rates","path","geoPath","x","scaleLinear","domain","rangeRound","color","scaleThreshold","range","legend","append","attr","String","bars","selectAll","enter","i","text","title","id","county_values","values","remove","forEach","set","FIPS","feature","counties","objects","features","fill_function","on","nodes","county","mouse","event","currentTarget","xPosition","yPosition","County","classes","death_rate","datum","mesh","states","a","b","app","module","config","$stateProvider","$locationProvider","state","url","templateUrl","controller"],"mappings":"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","file":"./dist/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 65bbfc5f24a724f50e7d","module.exports = angular;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"angular\"\n// module id = 0\n// module chunks = 0","module.exports = d3;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"d3\"\n// module id = 1\n// module chunks = 0","import angular from \"angular\";\nimport * as d3 from \"d3\";\nimport CountyMap from './map';\n\nexport default class MapCtrl {\n\n  constructor($http, $interval, $window) {\n    console.log(this);\n    this.$http = $http;\n    this.$interval = $interval;\n    this.$window = $window;\n    this.timestep = 0;\n\n    this.map = new CountyMap('#map');\n    this.loading = true;\n\n    this.$http.get('https://d3js.org/us-10m.v1.json').then( (resp) => {\n      this.map.draw(resp.data);\n    }).then( () => {\n      d3.csv('./assets/data.csv')\n        .row( (d) => {\n          d[\"death_rate\"] = d[\"Estimated Age-adjusted Death Rate, 11 Categories (in ranges)\"];\n          return d;\n        })\n        .get( (data) => {\n          let nested = d3.nest()\n            .key((d) => {return +d.Year})\n            .entries(data);\n          this.nested_data = nested;\n          this.start_animation();\n          this.loading = false;\n        });\n    })\n  }\n\n  stop_animation () {\n    this.$interval.cancel(this.interval_promise);\n    this.play = false;\n  }\n\n  start_animation () {\n    this.stop_animation();\n    this.play = true;\n    this.interval_promise = this.$interval( () => {\n      this.map.set_county_values(this.nested_data[this.timestep]);\n      this.timestep++;\n      if (this.timestep >= this.nested_data.length) {\n        this.timestep = 0;\n      }\n    }, 1000);\n  }\n\n  toggle_play () {\n    console.log(\"toggle\")\n    this.play ? this.stop_animation() : this.start_animation();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/MapCtrl.js","import * as d3 from 'd3';\nimport * as topojson from 'topojson';\n\nconsole.log(topojson)\nexport default class CountyMap {\n\n  constructor (element_id) {\n    var self = this;\n    this.element_id = element_id;\n    this.svg = d3.select(element_id);\n    this.width = parseInt(this.svg.style(\"width\"), 10);\n    this.height = parseInt(this.svg.style(\"height\"), 10);\n    this.colors = [\n      \"rgb(0, 0, 255)\",\n      \"rgb(23, 0, 232)\",\n      \"rgb(46, 0, 209)\",\n      \"rgb(70, 0, 185)\",\n      \"rgb(93, 0, 162)\",\n      \"rgb(116, 0, 139)\",\n      \"rgb(139, 0, 116)\",\n      \"rgb(162, 0, 93)\",\n      \"rgb(185, 0, 70)\",\n      \"rgb(209, 0, 46)\",\n       \"rgb(232, 0, 23)\"\n     ]\n    this.categories = [\n      \"0-2\",\n      \"2.1-4\",\n      \"4.1-6\",\n      \"6.1-8\",\n      \"8.1-10\",\n      \"10.1-12\",\n      \"12.1-14\",\n      \"14.1-16\",\n      \"16.1-18\",\n      \"18.1-20\",\n      \">20\"\n    ]\n\n    this.rates = d3.map();\n\n    this.path = d3.geoPath();\n\n    this.x = d3.scaleLinear()\n        .domain([0, 10])\n        .rangeRound([0, 300]);\n    this.color = d3.scaleThreshold()\n        .domain(d3.range(0, 10))\n        .range(this.colors);\n\n    this.legend = this.svg.append(\"g\")\n        .attr(\"class\", \"key\")\n        .attr(\"transform\", \"translate(\" + String(this.width - 220) + \",50)\");\n\n    this.bars = this.legend.selectAll(\".legend-box\")\n      .data(this.colors)\n      .enter()\n        .append(\"g\")\n\n    this.bars.append(\"rect\")\n          .attr(\"height\", 25)\n          .attr(\"class\", \"legend-box\")\n          .attr(\"y\", (d, i)=> { return this.x(i); })\n          .attr(\"x\", 0)\n          .attr(\"width\", 25 )\n          .attr(\"fill\", (d, i)=> { return this.color(i); });\n\n    this.bars.append(\"text\")\n          .attr(\"x\", 30)\n          .attr(\"y\", (d, i)=> {return this.x(i) + 18; })\n          .text((d, i) => {return this.categories[i]});\n\n    this.legend.append(\"text\")\n        .attr(\"class\", \"caption\")\n        .attr(\"x\", 0)\n        .attr(\"y\", -6)\n        .attr(\"fill\", \"#000\")\n        .attr(\"text-anchor\", \"start\")\n        .attr(\"font-weight\", \"bold\")\n        .attr(\"font-size\", \"1em\")\n        .text(\"Death rate per 100k\");\n\n    this.title = this.svg.append(\"g\")\n        .attr(\"class\", \"map_title\")\n        .attr(\"transform\", \"translate(\" + String(this.width/2)+ \",30)\");\n\n\n  }\n\n  element_id (id) {\n    this.element_id = id;\n    return this;\n  }\n\n  set_county_values (data) {\n    this.county_values = data.values;\n    this.title.selectAll('.map-title').remove();\n    this.title.append(\"text\")\n      .attr('class', 'map-title').text(data.key);\n    this.county_values.forEach( (d) => {\n      this.rates.set(d.FIPS, d);\n    })\n    this.svg.selectAll('.counties').remove()\n\n    this.svg.append(\"g\")\n        .attr(\"class\", \"counties\")\n      .selectAll(\"path\")\n      .data(topojson.feature(this.counties, this.counties.objects.counties).features)\n      .enter().append(\"path\")\n        .attr(\"fill\", (d) => {\n          d = this.rates.get(d.id)\n          if (d) {\n            return this.fill_function(d)\n          } else {\n            return \"black\";\n          }\n        })\n        .attr(\"d\", this.path)\n        .on('mouseover', (d, i, nodes) => {\n          let county = this.rates.get(d.id);\n          console.log(county)\n          console.log(d3.mouse(d3.event.currentTarget))\n          let xPosition = d3.mouse(d3.event.currentTarget)[0];\n          let yPosition = d3.mouse(d3.event.currentTarget)[1] - 30;\n          //\n          this.svg.append(\"text\")\n            .attr(\"class\", \"tooltip\")\n            .attr(\"x\", xPosition)\n            .attr(\"y\", yPosition)\n            .attr(\"text-anchor\", \"middle\")\n            .attr(\"font-family\", \"sans-serif\")\n            .attr(\"font-size\", \"11px\")\n            .attr(\"font-weight\", \"bold\")\n            .attr(\"fill\", \"black\")\n            .text(county.County);\n        })\n        .on('mouseout', (d) => {\n          d3.select(\".tooltip\").remove();\n        })\n  }\n\n  fill_function (d) {\n    let classes = {\n      \"0-2\":      \"rgb(0, 0, 255)\",\n      \"2.1-4\":      \"rgb(23, 0, 232)\",\n      \"4.1-6\":      \"rgb(46, 0, 209)\",\n      \"6.1-8\":      \"rgb(70, 0, 185)\",\n      \"8.1-10\":       \"rgb(93, 0, 162)\",\n      \"10.1-12\":      \"rgb(116, 0, 139)\",\n      \"12.1-14\":      \"rgb(139, 0, 116)\",\n      \"14.1-16\":      \"rgb(162, 0, 93)\",\n      \"16.1-18\":      \"rgb(185, 0, 70)\",\n      \"18.1-20\":      \"rgb(209, 0, 46)\",\n      \">20\":        \"rgb(232, 0, 23)\"\n    }\n    return classes[d.death_rate];\n  }\n\n  draw (data) {\n    console.log(data)\n    this.counties = data;\n    this.svg.append(\"g\")\n        .attr(\"class\", \"counties\")\n      .selectAll(\"path\")\n      .data(topojson.feature(data, data.objects.counties).features)\n      .enter().append(\"path\")\n        .attr(\"d\", this.path)\n        .attr(\"id\", (d) => { return 'county_' + d.id})\n    this.svg.append(\"path\")\n        .datum(topojson.mesh(data, data.objects.states, (a, b) => { return a !== b; }))\n        .attr(\"class\", \"states\")\n        .attr(\"d\", this.path);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/map.js","module.exports = topojson;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"topojson\"\n// module id = 4\n// module chunks = 0","import angular from \"angular\";\nimport MapCtrl from \"./MapCtrl\";\n\nconsole.log(MapCtrl)\nlet app = angular.module(\"app\", [\"ui.router\"])\n\napp.config(function ($stateProvider, $locationProvider) {\n\n\n  \n  $stateProvider\n    .state('map', {\n      url: '',\n      templateUrl: 'templates/map.html',\n      controller: 'MapCtrl as vm'\n    })\n})\n\napp.controller('MapCtrl', MapCtrl);\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}