{"version":3,"sources":["webpack:///webpack/bootstrap 70ae674b513a03d0b299","webpack:///external \"angular\"","webpack:///external \"d3\"","webpack:///./src/MapCtrl.js","webpack:///./src/map.js","webpack:///external \"topojson\"","webpack:///./src/index.js"],"names":["d3","MapCtrl","$http","$interval","$window","$scope","timestep","map","on","data","idx","data_by_county","loading","get","then","resp","draw","csv","row","d","nested","nest","key","Year","entries","nested_data","start_animation","county","found","forEach","year","values","FIPS","id","push","death_rate","County","county_by_year","selected_county","$apply","cancel","interval_promise","play","stop_animation","set_county_values","length","console","log","topojson","CountyMap","element_id","svg","select","width","parseInt","style","height","attr","centered","colors","categories","dispatcher","dispatch","rates","projection","geoAlbersUsa","scale","path","geoPath","x","scaleLinear","domain","rangeRound","color","scaleThreshold","range","reverse","legend","append","bars","selectAll","enter","i","text","title","String","value","apply","arguments","county_values","remove","set","feature","counties","objects","features","rate","fill_function","call","classes","datum","mesh","states","a","b","app","module","config","$stateProvider","$locationProvider","state","url","templateUrl","controller"],"mappings":"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","file":"./dist/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 70ae674b513a03d0b299","module.exports = angular;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"angular\"\n// module id = 0\n// module chunks = 0","module.exports = d3;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"d3\"\n// module id = 1\n// module chunks = 0","import angular from \"angular\";\nimport * as d3 from \"d3\";\nimport CountyMap from './map';\n\nexport default class MapCtrl {\n\n  constructor($http, $interval, $window, $scope) {\n    this.$http = $http;\n    this.$interval = $interval;\n    this.$window = $window;\n    this.$scope = $scope;\n    this.timestep = 0;\n\n    this.map = new CountyMap('#map');\n    this.map.on('county_click', (data, idx)=>{\n      this.data_by_county(data);\n    });\n    this.loading = true;\n\n    this.$http.get('https://d3js.org/us-10m.v1.json').then( (resp) => {\n      this.map.draw(resp.data);\n    }).then( () => {\n      d3.csv('./assets/data.csv')\n        .row( (d) => {\n          d[\"death_rate\"] = d[\"Estimated Age-adjusted Death Rate, 11 Categories (in ranges)\"];\n          return d;\n        })\n        .get( (data) => {\n          let nested = d3.nest()\n            .key((d) => {return +d.Year;})\n            .entries(data);\n          this.nested_data = nested;\n          this.start_animation();\n          this.loading = false;\n        });\n    });\n  }\n\n  data_by_county(county) {\n\n    let found = [];\n    this.nested_data.forEach( (year)=> {\n      year.values.forEach((d)=>{\n        if (d.FIPS === county.id) {\n          found.push({year:year.key, death_rate:d.death_rate, county:d.County});\n        }\n      });\n    });\n    this.county_by_year = found;\n    this.selected_county = county;\n    this.$scope.$apply();\n  }\n\n  stop_animation () {\n    this.$interval.cancel(this.interval_promise);\n    this.play = false;\n  }\n\n  start_animation () {\n    this.stop_animation();\n    this.play = true;\n    this.interval_promise = this.$interval( () => {\n      this.map.set_county_values(this.nested_data[this.timestep]);\n      this.timestep++;\n      if (this.timestep >= this.nested_data.length) {\n        this.timestep = 0;\n      }\n    }, 1000);\n  }\n\n  toggle_play () {\n    console.log(\"toggle\");\n    this.play ? this.stop_animation() : this.start_animation();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/MapCtrl.js","import * as d3 from 'd3';\nimport * as topojson from 'topojson';\n\nexport default class CountyMap {\n\n  constructor (element_id) {\n    this.element_id = element_id;\n    this.svg = d3.select(element_id);\n    this.width = parseInt(this.svg.style(\"width\"), 10);\n    this.height = 600 / 960 * this.width * 0.75;\n    this.svg.style({\"height\": this.height});\n    this.svg.attr(\"height\", this.height)\n    this.centered = null;\n    this.colors = [\n      \"rgb(0, 0, 255)\",\n      \"rgb(23, 0, 232)\",\n      \"rgb(46, 0, 209)\",\n      \"rgb(70, 0, 185)\",\n      \"rgb(93, 0, 162)\",\n      \"rgb(116, 0, 139)\",\n      \"rgb(139, 0, 116)\",\n      \"rgb(162, 0, 93)\",\n      \"rgb(185, 0, 70)\",\n      \"rgb(209, 0, 46)\",\n       \"rgb(232, 0, 23)\"\n    ];\n    this.categories = [\n      \">20\",\n      \"18.1-20\",\n      \"16.1-18\",\n      \"14.1-16\",\n      \"12.1-14\",\n      \"10.1-12\",\n      \"8.1-10\",\n      \"6.1-8\",\n      \"4.1-6\",\n      \"2.1-4\",\n      \"0-2\",\n    ];\n\n    // d3.select(window)\n    // \t\t.on(\"resize\", this.resize);\n\n    // window.addEventListener('resize',()=> {\n    //   console.log(\"resize\");\n    //   this.width = parseInt(this.svg.style(\"width\"), 10);\n    //   this.height = parseInt(this.svg.style(\"height\"), 10);\n    //   console.log(this.width)\n    //   this.draw(this.counties);\n    // })\n    this.dispatcher = d3.dispatch(\"county_click\", \"other_event\");\n    this.rates = d3.map();\n\n    this.projection = d3.geoAlbersUsa().scale(1000);\n    // console.log(this.projection)\n    // debugger\n\n    this.path = d3.geoPath();\n    // this.path = d3.geoPath();\n\n    this.x = d3.scaleLinear()\n        .domain([0, 10])\n        .rangeRound([0, 300]);\n    this.color = d3.scaleThreshold()\n        .domain(d3.range(0, 10))\n        .range(this.colors.reverse());\n\n    this.legend = this.svg.append(\"g\")\n        .attr(\"class\", \"key\")\n        .attr(\"transform\", \"translate(\" + this.width*0.80 +\",50)\");\n\n\n    this.bars = this.legend.selectAll(\".legend-box\")\n      .data(this.colors)\n      .enter()\n        .append(\"g\");\n\n    this.bars.append(\"rect\")\n          .attr(\"height\", 25)\n          .attr(\"class\", \"legend-box\")\n          .attr(\"y\", (d, i)=> { return this.x(i); })\n          .attr(\"x\", 0)\n          .attr(\"width\", 25 )\n          .attr(\"fill\", (d, i)=> { return this.color(i); });\n\n    this.bars.append(\"text\")\n          .attr(\"x\", 30)\n          .attr(\"y\", (d, i)=> {return this.x(i) + 18; })\n          .text((d, i) => {return this.categories[i];});\n\n    this.legend.append(\"text\")\n        .attr(\"class\", \"caption\")\n        .attr(\"x\", 0)\n        .attr(\"y\", -6)\n        .attr(\"fill\", \"#000\")\n        .attr(\"text-anchor\", \"start\")\n        .attr(\"font-weight\", \"bold\")\n        .attr(\"font-size\", \"1em\")\n        .text(\"Death rate per 100k\");\n\n    this.title = this.svg.append(\"g\")\n        .attr(\"class\", \"map_title\")\n        .attr(\"transform\", \"translate(\" + String(this.width/2)+ \",30)\");\n\n    this.map = this.svg.append(\"g\")\n      .attr('class', \"map-container\")\n      .attr(\"transform\", \"scale(\" + this.width/960* 0.75  + \")\");\n\n  }\n\n  on() {\n    let value = this.dispatcher.on.apply(this.dispatcher, arguments);\n    return value === this.dispatcher ? this : value;\n  }\n\n  element_id (id) {\n    this.element_id = id;\n    return this;\n  }\n\n  set_county_values (data) {\n    this.county_values = data.values;\n    this.title.selectAll('.map-title').remove();\n    this.title.append(\"text\")\n      .attr('class', 'map-title').text(data.key);\n    this.county_values.forEach( (d) => {\n      this.rates.set(d.FIPS, d);\n    });\n    this.map.selectAll('.counties').remove();\n\n    this.map.append(\"g\")\n      .attr(\"class\", \"counties\")\n      .selectAll(\"path\")\n    .data(topojson.feature(this.counties, this.counties.objects.counties).features)\n      .enter().append(\"path\")\n        .attr(\"fill\", (d, i) => {\n          let rate = this.rates.get(d.id);\n          if (rate) {\n            return this.fill_function(rate);\n          } else {\n            return \"black\";\n          }\n        })\n        .attr(\"d\", this.path)\n        .on('click', (d, i)=>{\n          this.dispatcher.call('county_click', this, d, i);\n        });\n\n  }\n\n\n\n  resize () {\n    this.width = parseInt(this.svg.style(\"width\"), 10);\n    this.height = parseInt(this.svg.style(\"height\"), 10);\n    this.map.attr(\"transform\", \"scale(\" + this.width/960* 0.75  + \")\");\n\n\t}\n\n  // click (d, node) {\n  //   var x, y, k;\n  //   console.log(d, node);\n  //   if (d && this.centered !== d) {\n  //     console.log(this.centered);\n  //     var centroid = node.path.centroid(d);\n  //     x = centroid[0];\n  //     y = centroid[1];\n  //     k = 4;\n  //     this.centered = d;\n  //   } else {\n  //     x = this.width / 2;\n  //     y = this.height / 2;\n  //     k = 1;\n  //     this.centered = null;\n  //     console.log(this.centered);\n  //   }\n\n\n  // }\n\n  fill_function (d) {\n    let classes = {\n      \"0-2\":      \"rgb(0, 0, 255)\",\n      \"2.1-4\":      \"rgb(23, 0, 232)\",\n      \"4.1-6\":      \"rgb(46, 0, 209)\",\n      \"6.1-8\":      \"rgb(70, 0, 185)\",\n      \"8.1-10\":       \"rgb(93, 0, 162)\",\n      \"10.1-12\":      \"rgb(116, 0, 139)\",\n      \"12.1-14\":      \"rgb(139, 0, 116)\",\n      \"14.1-16\":      \"rgb(162, 0, 93)\",\n      \"16.1-18\":      \"rgb(185, 0, 70)\",\n      \"18.1-20\":      \"rgb(209, 0, 46)\",\n      \">20\":        \"rgb(232, 0, 23)\"\n    };\n    return classes[d.death_rate];\n  }\n\n  draw (data) {\n    this.counties = data;\n    this.map.append(\"g\")\n        .attr(\"class\", \"states\")\n      .selectAll(\"path\")\n      .data(topojson.feature(data, data.objects.counties).features)\n      .enter().append(\"path\")\n        .attr(\"d\", this.path)\n        .attr(\"id\", (d) => { return 'county_' + d.id;});\n\n    this.map.append(\"path\")\n        .datum(topojson.mesh(data, data.objects.states, (a, b) => { return a !== b; }))\n        .attr(\"class\", \"states\")\n        .attr(\"d\", this.path);\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/map.js","module.exports = topojson;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"topojson\"\n// module id = 4\n// module chunks = 0","import angular from \"angular\";\nimport MapCtrl from \"./MapCtrl\";\n\nlet app = angular.module(\"app\", [\"ui.router\"]);\n\napp.config(function ($stateProvider, $locationProvider) {\n\n\n\n  $stateProvider\n    .state('map', {\n      url: '',\n      templateUrl: 'templates/map.html',\n      controller: 'MapCtrl as vm'\n    });\n});\n\napp.controller('MapCtrl', MapCtrl);\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}