{"version":3,"sources":["webpack:///webpack/bootstrap d97a4d17fdea84f48c3a","webpack:///external \"angular\"","webpack:///external \"d3\"","webpack:///./src/MapCtrl.js","webpack:///./src/map.js","webpack:///external \"topojson\"","webpack:///./src/index.js"],"names":["d3","MapCtrl","$http","$interval","$window","timestep","map","loading","get","then","resp","draw","data","csv","row","d","nested","nest","key","Year","entries","nested_data","console","log","start_animation","cancel","interval_promise","play","stop_animation","set_county_values","length","topojson","CountyMap","element_id","svg","select","width","parseInt","style","height","centered","colors","categories","window","addEventListener","counties","rates","path","geoPath","x","scaleLinear","domain","rangeRound","color","scaleThreshold","range","reverse","legend","append","attr","chart","bars","selectAll","enter","i","text","title","String","id","county_values","values","remove","forEach","set","FIPS","feature","objects","features","fill_function","on","click","node","y","k","centroid","transition","duration","classes","death_rate","datum","mesh","states","a","b","app","module","config","$stateProvider","$locationProvider","state","url","templateUrl","controller"],"mappings":"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","file":"./dist/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d97a4d17fdea84f48c3a","module.exports = angular;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"angular\"\n// module id = 0\n// module chunks = 0","module.exports = d3;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"d3\"\n// module id = 1\n// module chunks = 0","import angular from \"angular\";\nimport * as d3 from \"d3\";\nimport CountyMap from './map';\n\nexport default class MapCtrl {\n\n  constructor($http, $interval, $window) {\n    this.$http = $http;\n    this.$interval = $interval;\n    this.$window = $window;\n    this.timestep = 0;\n\n    this.map = new CountyMap('#map');\n    this.loading = true;\n\n    this.$http.get('https://d3js.org/us-10m.v1.json').then( (resp) => {\n      this.map.draw(resp.data);\n    }).then( () => {\n      d3.csv('./assets/data.csv')\n        .row( (d) => {\n          d[\"death_rate\"] = d[\"Estimated Age-adjusted Death Rate, 11 Categories (in ranges)\"];\n          return d;\n        })\n        .get( (data) => {\n          let nested = d3.nest()\n            .key((d) => {return +d.Year})\n            .entries(data);\n          this.nested_data = nested;\n          console.log(this.nested_data)\n          this.start_animation();\n          this.loading = false;\n        });\n    })\n  }\n\n  stop_animation () {\n    this.$interval.cancel(this.interval_promise);\n    this.play = false;\n  }\n\n  start_animation () {\n    this.stop_animation();\n    this.play = true;\n    this.interval_promise = this.$interval( () => {\n      this.map.set_county_values(this.nested_data[this.timestep]);\n      this.timestep++;\n      if (this.timestep >= this.nested_data.length) {\n        this.timestep = 0;\n      }\n    }, 1000);\n  }\n\n  toggle_play () {\n    console.log(\"toggle\")\n    this.play ? this.stop_animation() : this.start_animation();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/MapCtrl.js","import * as d3 from 'd3';\nimport * as topojson from 'topojson';\n\nexport default class CountyMap {\n\n  constructor (element_id) {\n    this.element_id = element_id;\n    this.svg = d3.select(element_id);\n    this.width = parseInt(this.svg.style(\"width\"), 10);\n    this.height = parseInt(this.svg.style(\"height\"), 10);\n    this.centered = null;\n    this.colors = [\n      \"rgb(0, 0, 255)\",\n      \"rgb(23, 0, 232)\",\n      \"rgb(46, 0, 209)\",\n      \"rgb(70, 0, 185)\",\n      \"rgb(93, 0, 162)\",\n      \"rgb(116, 0, 139)\",\n      \"rgb(139, 0, 116)\",\n      \"rgb(162, 0, 93)\",\n      \"rgb(185, 0, 70)\",\n      \"rgb(209, 0, 46)\",\n       \"rgb(232, 0, 23)\"\n     ]\n    this.categories = [\n      \">20\",\n      \"18.1-20\",\n      \"16.1-18\",\n      \"14.1-16\",\n      \"12.1-14\",\n      \"10.1-12\",\n      \"8.1-10\",\n      \"6.1-8\",\n      \"4.1-6\",\n      \"2.1-4\",\n      \"0-2\",\n    ]\n\n    window.addEventListener('resize',()=> {\n      console.log(\"resize\");\n      this.width = parseInt(this.svg.style(\"width\"), 10);\n      this.height = parseInt(this.svg.style(\"height\"), 10);\n      console.log(this.width)\n      this.draw(this.counties);\n    })\n\n    this.rates = d3.map();\n\n    this.path = d3.geoPath();\n\n    this.x = d3.scaleLinear()\n        .domain([0, 10])\n        .rangeRound([0, 300]);\n    this.color = d3.scaleThreshold()\n        .domain(d3.range(0, 10))\n        .range(this.colors.reverse());\n\n    this.legend = this.svg.append(\"g\")\n        .attr(\"class\", \"key\")\n        .attr(\"transform\", \"translate(\" + this.width*0.80 +\",50)\");\n\n    this.chart = this.svg.append(\"g\")\n            .attr(\"class\", \"chart\")\n            .attr(\"transform\", \"translate(\" + this.width*0.80 +\",\" + this.height-200 +')');\n\n    this.bars = this.legend.selectAll(\".legend-box\")\n      .data(this.colors)\n      .enter()\n        .append(\"g\")\n\n    this.bars.append(\"rect\")\n          .attr(\"height\", 25)\n          .attr(\"class\", \"legend-box\")\n          .attr(\"y\", (d, i)=> { return this.x(i); })\n          .attr(\"x\", 0)\n          .attr(\"width\", 25 )\n          .attr(\"fill\", (d, i)=> { return this.color(i); });\n\n    this.bars.append(\"text\")\n          .attr(\"x\", 30)\n          .attr(\"y\", (d, i)=> {return this.x(i) + 18; })\n          .text((d, i) => {return this.categories[i]});\n\n    this.legend.append(\"text\")\n        .attr(\"class\", \"caption\")\n        .attr(\"x\", 0)\n        .attr(\"y\", -6)\n        .attr(\"fill\", \"#000\")\n        .attr(\"text-anchor\", \"start\")\n        .attr(\"font-weight\", \"bold\")\n        .attr(\"font-size\", \"1em\")\n        .text(\"Death rate per 100k\");\n\n    this.title = this.svg.append(\"g\")\n        .attr(\"class\", \"map_title\")\n        .attr(\"transform\", \"translate(\" + String(this.width/2)+ \",30)\");\n\n    this.map = this.svg.append(\"g\")\n      .attr('class', \"map-container\")\n      .attr('width', this.width);\n\n  }\n\n  element_id (id) {\n    this.element_id = id;\n    return this;\n  }\n\n  set_county_values (data) {\n    this.county_values = data.values;\n    this.title.selectAll('.map-title').remove();\n    this.title.append(\"text\")\n      .attr('class', 'map-title').text(data.key);\n    this.county_values.forEach( (d) => {\n      this.rates.set(d.FIPS, d);\n    })\n    this.map.selectAll('.counties').remove()\n\n    this.map.append(\"g\")\n      .attr(\"class\", \"counties\")\n      .selectAll(\"path\")\n    .data(topojson.feature(this.counties, this.counties.objects.counties).features)\n      .enter().append(\"path\")\n        .attr(\"fill\", (d) => {\n          d = this.rates.get(d.id)\n          if (d) {\n            return this.fill_function(d)\n          } else {\n            return \"black\";\n          }\n        })\n        .attr(\"d\", this.path)\n        .on('click', this.click);\n\n  }\n\n  click (d, node) {\n    var x, y, k;\n    console.log(d, node)\n    if (d && this.centered !== d) {\n      console.log(this.centered)\n      var centroid = node.path.centroid(d);\n      x = centroid[0];\n      y = centroid[1];\n      k = 4;\n      this.centered = d;\n    } else {\n      x = this.width / 2;\n      y = this.height / 2;\n      k = 1;\n      this.centered = null;\n      console.log(this.centered)\n    }\n\n    this.map.transition()\n      .duration(750)\n      .attr(\"transform\", \"translate(\" + this.width / 2 + \",\" + this.height / 2 + \")scale(\" + k + \")translate(\" + -x + \",\" + -y + \")\")\n      .style(\"stroke-width\", 1.5 / k + \"px\");\n  }\n\n  fill_function (d) {\n    let classes = {\n      \"0-2\":      \"rgb(0, 0, 255)\",\n      \"2.1-4\":      \"rgb(23, 0, 232)\",\n      \"4.1-6\":      \"rgb(46, 0, 209)\",\n      \"6.1-8\":      \"rgb(70, 0, 185)\",\n      \"8.1-10\":       \"rgb(93, 0, 162)\",\n      \"10.1-12\":      \"rgb(116, 0, 139)\",\n      \"12.1-14\":      \"rgb(139, 0, 116)\",\n      \"14.1-16\":      \"rgb(162, 0, 93)\",\n      \"16.1-18\":      \"rgb(185, 0, 70)\",\n      \"18.1-20\":      \"rgb(209, 0, 46)\",\n      \">20\":        \"rgb(232, 0, 23)\"\n    }\n    return classes[d.death_rate];\n  }\n\n  draw (data) {\n    console.log(data)\n    this.counties = data;\n    this.map.append(\"g\")\n        .attr(\"class\", \"states\")\n      .selectAll(\"path\")\n      .data(topojson.feature(data, data.objects.counties).features)\n      .enter().append(\"path\")\n        .attr(\"d\", this.path)\n        .attr(\"id\", (d) => { return 'county_' + d.id})\n    this.map.append(\"path\")\n        .datum(topojson.mesh(data, data.objects.states, (a, b) => { return a !== b; }))\n        .attr(\"class\", \"states\")\n        .attr(\"d\", this.path);\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/map.js","module.exports = topojson;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"topojson\"\n// module id = 4\n// module chunks = 0","import angular from \"angular\";\nimport MapCtrl from \"./MapCtrl\";\n\nconsole.log(MapCtrl)\nlet app = angular.module(\"app\", [\"ui.router\"])\n\napp.config(function ($stateProvider, $locationProvider) {\n\n\n  \n  $stateProvider\n    .state('map', {\n      url: '',\n      templateUrl: 'templates/map.html',\n      controller: 'MapCtrl as vm'\n    })\n})\n\napp.controller('MapCtrl', MapCtrl);\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}