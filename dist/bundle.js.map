{"version":3,"sources":["webpack:///webpack/bootstrap 874b6d8cb9b79fc0f446","webpack:///external \"angular\"","webpack:///external \"d3\"","webpack:///./src/MapCtrl.js","webpack:///./src/map.js","webpack:///external \"topojson\"","webpack:///./src/index.js"],"names":["d3","MapCtrl","$http","$interval","$window","$scope","timestep","map","on","data","idx","data_by_county","id","loading","get","then","resp","draw","csv","row","d","nested","nest","key","Year","entries","nested_data","console","log","start_animation","county_id","found","forEach","year","values","FIPS","push","death_rate","county_by_year","$apply","cancel","interval_promise","play","stop_animation","set_county_values","length","topojson","CountyMap","element_id","svg","select","width","parseInt","style","height","centered","colors","categories","dispatcher","dispatch","rates","projection","geoAlbersUsa","scale","path","geoPath","x","scaleLinear","domain","rangeRound","color","scaleThreshold","range","reverse","legend","append","attr","chart","bars","selectAll","enter","i","text","title","String","value","apply","arguments","county_values","remove","set","feature","counties","objects","features","rate","fill_function","call","classes","datum","mesh","states","a","b","app","module","config","$stateProvider","$locationProvider","state","url","templateUrl","controller"],"mappings":"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","file":"./dist/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 874b6d8cb9b79fc0f446","module.exports = angular;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"angular\"\n// module id = 0\n// module chunks = 0","module.exports = d3;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"d3\"\n// module id = 1\n// module chunks = 0","import angular from \"angular\";\nimport * as d3 from \"d3\";\nimport CountyMap from './map';\n\nexport default class MapCtrl {\n\n  constructor($http, $interval, $window, $scope) {\n    this.$http = $http;\n    this.$interval = $interval;\n    this.$window = $window;\n    this.$scope = $scope;\n    this.timestep = 0;\n\n    this.map = new CountyMap('#map');\n    this.map.on('county_click', (data, idx)=>{\n      this.data_by_county(data.id);\n    });\n    this.loading = true;\n\n    this.$http.get('https://d3js.org/us-10m.v1.json').then( (resp) => {\n      this.map.draw(resp.data);\n    }).then( () => {\n      d3.csv('./assets/data.csv')\n        .row( (d) => {\n          d[\"death_rate\"] = d[\"Estimated Age-adjusted Death Rate, 11 Categories (in ranges)\"];\n          return d;\n        })\n        .get( (data) => {\n          let nested = d3.nest()\n            .key((d) => {return +d.Year;})\n            .entries(data);\n          this.nested_data = nested;\n          console.log(this.nested_data);\n          this.start_animation();\n          this.loading = false;\n        });\n    });\n  }\n\n  data_by_county(county_id) {\n    console.log(county_id);\n    let found = [];\n    this.nested_data.forEach( (year)=> {\n      year.values.forEach((d)=>{\n        if (d.FIPS === county_id) {\n          found.push({year:year.key, death_rate:d.death_rate});\n        }\n      });\n    });\n    console.log(found);\n    this.county_by_year = found;\n    this.$scope.$apply();\n  }\n\n  stop_animation () {\n    this.$interval.cancel(this.interval_promise);\n    this.play = false;\n  }\n\n  start_animation () {\n    this.stop_animation();\n    this.play = true;\n    this.interval_promise = this.$interval( () => {\n      this.map.set_county_values(this.nested_data[this.timestep]);\n      this.timestep++;\n      if (this.timestep >= this.nested_data.length) {\n        this.timestep = 0;\n      }\n    }, 1000);\n  }\n\n  toggle_play () {\n    console.log(\"toggle\");\n    this.play ? this.stop_animation() : this.start_animation();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/MapCtrl.js","import * as d3 from 'd3';\nimport * as topojson from 'topojson';\n\nexport default class CountyMap {\n\n  constructor (element_id) {\n    this.element_id = element_id;\n    this.svg = d3.select(element_id);\n    this.width = parseInt(this.svg.style(\"width\"), 10);\n    this.height = parseInt(this.svg.style(\"height\"), 10);\n    this.centered = null;\n    this.colors = [\n      \"rgb(0, 0, 255)\",\n      \"rgb(23, 0, 232)\",\n      \"rgb(46, 0, 209)\",\n      \"rgb(70, 0, 185)\",\n      \"rgb(93, 0, 162)\",\n      \"rgb(116, 0, 139)\",\n      \"rgb(139, 0, 116)\",\n      \"rgb(162, 0, 93)\",\n      \"rgb(185, 0, 70)\",\n      \"rgb(209, 0, 46)\",\n       \"rgb(232, 0, 23)\"\n    ];\n    this.categories = [\n      \">20\",\n      \"18.1-20\",\n      \"16.1-18\",\n      \"14.1-16\",\n      \"12.1-14\",\n      \"10.1-12\",\n      \"8.1-10\",\n      \"6.1-8\",\n      \"4.1-6\",\n      \"2.1-4\",\n      \"0-2\",\n    ];\n\n    // d3.select(window)\n    // \t\t.on(\"resize\", this.resize);\n\n    // window.addEventListener('resize',()=> {\n    //   console.log(\"resize\");\n    //   this.width = parseInt(this.svg.style(\"width\"), 10);\n    //   this.height = parseInt(this.svg.style(\"height\"), 10);\n    //   console.log(this.width)\n    //   this.draw(this.counties);\n    // })\n    this.dispatcher = d3.dispatch(\"county_click\", \"other_event\");\n    this.rates = d3.map();\n\n    this.projection = d3.geoAlbersUsa().scale(1000);\n    // console.log(this.projection)\n    // debugger\n\n    this.path = d3.geoPath();\n    // this.path = d3.geoPath();\n\n    this.x = d3.scaleLinear()\n        .domain([0, 10])\n        .rangeRound([0, 300]);\n    this.color = d3.scaleThreshold()\n        .domain(d3.range(0, 10))\n        .range(this.colors.reverse());\n\n    this.legend = this.svg.append(\"g\")\n        .attr(\"class\", \"key\")\n        .attr(\"transform\", \"translate(\" + this.width*0.80 +\",50)\");\n\n    this.chart = this.svg.append(\"g\")\n            .attr(\"class\", \"chart\")\n            .attr(\"transform\", \"translate(\" + this.width*0.80 +\",\" + this.height-200 +')');\n\n    this.bars = this.legend.selectAll(\".legend-box\")\n      .data(this.colors)\n      .enter()\n        .append(\"g\");\n\n    this.bars.append(\"rect\")\n          .attr(\"height\", 25)\n          .attr(\"class\", \"legend-box\")\n          .attr(\"y\", (d, i)=> { return this.x(i); })\n          .attr(\"x\", 0)\n          .attr(\"width\", 25 )\n          .attr(\"fill\", (d, i)=> { return this.color(i); });\n\n    this.bars.append(\"text\")\n          .attr(\"x\", 30)\n          .attr(\"y\", (d, i)=> {return this.x(i) + 18; })\n          .text((d, i) => {return this.categories[i];});\n\n    this.legend.append(\"text\")\n        .attr(\"class\", \"caption\")\n        .attr(\"x\", 0)\n        .attr(\"y\", -6)\n        .attr(\"fill\", \"#000\")\n        .attr(\"text-anchor\", \"start\")\n        .attr(\"font-weight\", \"bold\")\n        .attr(\"font-size\", \"1em\")\n        .text(\"Death rate per 100k\");\n\n    this.title = this.svg.append(\"g\")\n        .attr(\"class\", \"map_title\")\n        .attr(\"transform\", \"translate(\" + String(this.width/2)+ \",30)\");\n\n    this.map = this.svg.append(\"g\")\n      .attr('class', \"map-container\")\n      .attr(\"transform\", \"scale(\" + this.width/960* 0.75  + \")\");\n\n  }\n\n  on() {\n    let value = this.dispatcher.on.apply(this.dispatcher, arguments);\n    return value === this.dispatcher ? this : value;\n  }\n\n  element_id (id) {\n    this.element_id = id;\n    return this;\n  }\n\n  set_county_values (data) {\n    this.county_values = data.values;\n    this.title.selectAll('.map-title').remove();\n    this.title.append(\"text\")\n      .attr('class', 'map-title').text(data.key);\n    this.county_values.forEach( (d) => {\n      this.rates.set(d.FIPS, d);\n    });\n    this.map.selectAll('.counties').remove();\n\n    this.map.append(\"g\")\n      .attr(\"class\", \"counties\")\n      .selectAll(\"path\")\n    .data(topojson.feature(this.counties, this.counties.objects.counties).features)\n      .enter().append(\"path\")\n        .attr(\"fill\", (d, i) => {\n          let rate = this.rates.get(d.id);\n          if (rate) {\n            return this.fill_function(rate);\n          } else {\n            return \"black\";\n          }\n        })\n        .attr(\"d\", this.path)\n        .on('click', (d, i)=>{\n          this.dispatcher.call('county_click', this, d, i);\n        });\n\n  }\n\n  \n\n  resize () {\n    this.width = parseInt(this.svg.style(\"width\"), 10);\n    this.height = parseInt(this.svg.style(\"height\"), 10);\n    this.map.attr(\"transform\", \"scale(\" + this.width/960* 0.75  + \")\");\n\n\t}\n\n  // click (d, node) {\n  //   var x, y, k;\n  //   console.log(d, node);\n  //   if (d && this.centered !== d) {\n  //     console.log(this.centered);\n  //     var centroid = node.path.centroid(d);\n  //     x = centroid[0];\n  //     y = centroid[1];\n  //     k = 4;\n  //     this.centered = d;\n  //   } else {\n  //     x = this.width / 2;\n  //     y = this.height / 2;\n  //     k = 1;\n  //     this.centered = null;\n  //     console.log(this.centered);\n  //   }\n\n\n  // }\n\n  fill_function (d) {\n    let classes = {\n      \"0-2\":      \"rgb(0, 0, 255)\",\n      \"2.1-4\":      \"rgb(23, 0, 232)\",\n      \"4.1-6\":      \"rgb(46, 0, 209)\",\n      \"6.1-8\":      \"rgb(70, 0, 185)\",\n      \"8.1-10\":       \"rgb(93, 0, 162)\",\n      \"10.1-12\":      \"rgb(116, 0, 139)\",\n      \"12.1-14\":      \"rgb(139, 0, 116)\",\n      \"14.1-16\":      \"rgb(162, 0, 93)\",\n      \"16.1-18\":      \"rgb(185, 0, 70)\",\n      \"18.1-20\":      \"rgb(209, 0, 46)\",\n      \">20\":        \"rgb(232, 0, 23)\"\n    };\n    return classes[d.death_rate];\n  }\n\n  draw (data) {\n    this.counties = data;\n    this.map.append(\"g\")\n        .attr(\"class\", \"states\")\n      .selectAll(\"path\")\n      .data(topojson.feature(data, data.objects.counties).features)\n      .enter().append(\"path\")\n        .attr(\"d\", this.path)\n        .attr(\"id\", (d) => { return 'county_' + d.id;});\n\n    this.map.append(\"path\")\n        .datum(topojson.mesh(data, data.objects.states, (a, b) => { return a !== b; }))\n        .attr(\"class\", \"states\")\n        .attr(\"d\", this.path);\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/map.js","module.exports = topojson;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"topojson\"\n// module id = 4\n// module chunks = 0","import angular from \"angular\";\nimport MapCtrl from \"./MapCtrl\";\n\nconsole.log(MapCtrl)\nlet app = angular.module(\"app\", [\"ui.router\"])\n\napp.config(function ($stateProvider, $locationProvider) {\n\n\n  \n  $stateProvider\n    .state('map', {\n      url: '',\n      templateUrl: 'templates/map.html',\n      controller: 'MapCtrl as vm'\n    })\n})\n\napp.controller('MapCtrl', MapCtrl);\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}